(this["webpackJsonplicense-project"]=this["webpackJsonplicense-project"]||[]).push([[0],{15:function(e,t,c){e.exports={titleTablelicense:"Panel_titleTablelicense__XzsBj",buttonFile:"Panel_buttonFile__VkGaO",containerButtonCSV:"Panel_containerButtonCSV__2pj19",csvButton:"Panel_csvButton__ZzE-C","circle-handle-back-login":"Panel_circle-handle-back-login__1AZlZ","angle-bracket-1":"Panel_angle-bracket-1__15zSO","circle-handle-table-refused":"Panel_circle-handle-table-refused__r1SRa",lineLeft:"Panel_lineLeft__2cDd2",lineRight:"Panel_lineRight__1ClTQ",modalLicenseRefused:"Panel_modalLicenseRefused__1yQtp",modalAlert:"Panel_modalAlert__1RnMf",open:"Panel_open__2ow_F",closed:"Panel_closed__1Tmu8",closedModalAlert:"Panel_closedModalAlert__3KTlQ"}},34:function(e,t,c){e.exports={backdrop:"Modal_backdrop__2FEZ0",modal:"Modal_modal__3Y7kB","modal-alert":"Modal_modal-alert__3VSNe",buttonModal:"Modal_buttonModal__3scAH"}},38:function(e,t,c){e.exports={containerDropdown:"Dropdownlist_containerDropdown__2F2Up",dropDownStyle:"Dropdownlist_dropDownStyle__2CImg",styleButtonDropDownlist:"Dropdownlist_styleButtonDropDownlist__3Lwh5"}},48:function(e,t,c){e.exports={containerCard:"CardLogin_containerCard__e5YSA",containerInput:"CardLogin_containerInput__QDIjv"}},50:function(e,t,c){e.exports={tableContainer:"TableLicense_tableContainer__2o55y",tableStyle:"TableLicense_tableStyle__2a4Z1",titleTable:"TableLicense_titleTable__NgTB3"}},51:function(e,t,c){e.exports={tableContainer:"Tabledevices_tableContainer__xA--Y",tableStyle:"Tabledevices_tableStyle__3MupK",titleTable:"Tabledevices_titleTable__3o3Ri",emptyContent:"Tabledevices_emptyContent__NulVm"}},56:function(e,t,c){e.exports={containerWelcome:"Welcome_containerWelcome__3yptG"}},57:function(e,t,c){e.exports={container:"ContainerPanel_container__3-E6A"}},59:function(e,t,c){e.exports={tableContainer:"TableLicensesRefused_tableContainer__MVCZa",tableStyle:"TableLicensesRefused_tableStyle__YgKmx",titleTable:"TableLicensesRefused_titleTable__1wcy5",emptyContent:"TableLicensesRefused_emptyContent__2qiNT"}},69:function(e,t,c){},82:function(e,t,c){"use strict";c.r(t);var n=c(1),i=c.n(n),s=c(26),a=c.n(s),l=(c(69),c(60)),r=c(13),d=c(30),o={},b=[],j={},u=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(n.useState)(o)[1],c=function(e,t){var c=j[e](o,t);o=Object(d.a)(Object(d.a)({},o),c);var n,i=Object(r.a)(b);try{for(i.s();!(n=i.n()).done;){(0,n.value)(o)}}catch(s){i.e(s)}finally{i.f()}};return Object(n.useEffect)((function(){return e&&b.push(t),function(){e&&(b=b.filter((function(e){return e!==t})))}}),[t,e]),[o,c]},v=function(){var e,t;e={SET_USERNAME:function(e,t){return{username:t}}},(t={username:""})&&(o=Object(d.a)(Object(d.a)({},o),t)),j=Object(d.a)(Object(d.a)({},j),e)},O=c(7),x=c(9),h="No data!",p="Historical Licenses Refused",f="Alert!",m=c(48),_=c.n(m),D=c(2),g=function(e){var t=u()[1],c=Object(n.useState)(),i=Object(O.a)(c,2),s=i[0],a=i[1],l=Object(x.g)();return Object(D.jsxs)("div",{className:_.a.containerCard,children:[Object(D.jsx)("h1",{children:"Welcome to the Licenses' Panel"}),Object(D.jsxs)("div",{className:_.a.containerInput,children:[Object(D.jsx)("label",{children:"Username:"}),Object(D.jsx)("input",{type:"text",onChange:function(e){var t=e.target.value;a(t)}})]}),Object(D.jsx)("button",{onClick:function(){l.push("/panel"),e.getUsername(s),t("SET_USERNAME",s)},children:"Enter"})]})},S=c(56),y=c.n(S),N=function(e){return Object(D.jsx)("div",{className:y.a.containerWelcome,children:Object(D.jsx)(g,{getUsername:e.getUsername})})},C=c(21),k=c.n(C),L=c(57),P=c.n(L),T=function(e){return Object(D.jsx)("div",{className:P.a.container,children:e.children})},A=c(58),M=c(17),w=c(37),I={apiKey:"AIzaSyDZO6G6c4uBD5flXZ6vu8lkEDgs35ge-6k",authDomain:"licenses-project.firebaseapp.com",databaseURL:"https://licenses-project-default-rtdb.europe-west1.firebasedatabase.app",projectId:"licenses-project",storageBucket:"licenses-project.appspot.com",messagingSenderId:"425639397392",appId:"1:425639397392:web:408b0df0e69f9bbe31e295",measurementId:"G-MVLYTDNPDF"},E=c(10),V=function(e){var t=Object(w.a)(I),c=Object(E.a)(t),n=Object(E.c)(c,"licenses/");return Object(E.b)(n,(function(t){var c=k.a.orderBy(t.val(),"license.os","asc");e(c),console.log("licenses retrieved from Db.")})),null},R=function(e){var t=Object(E.a)(),c=Object(E.c)(t,"devices/");try{Object(E.b)(c,(function(t){var c=t.val();e(c),console.log("Devices retrieved from Db.")}))}catch(n){console.error(n)}},B={0:{device:{idDevice:"device0",osDevice:"windows",osVersion:"10",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}},1:{device:{idDevice:"device1",osDevice:"android",osVersion:"9",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}},2:{device:{idDevice:"device2",osDevice:"ios",osVersion:"8",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}},3:{device:{idDevice:"device3",osDevice:"android",osVersion:"11",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}},4:{device:{idDevice:"device4",osDevice:"android",osVersion:"11",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}},5:{device:{idDevice:"device5",osDevice:"android",osVersion:"11",status:"pending",licensePaired:"N/D",licenseSelected:"N/D"}}},F=function(e){var t=e.target,c=t.files[0],n=new FileReader,i={};void 0!==c&&n.readAsText(t&&c),n.onload=function(e){var t=e.target.result.split("\r\n").map((function(e){return e.split(";")})),c=Object(M.a)(t),n=Object(A.a)(c);n[0];n.slice(1).forEach((function(e,t,c){var n={license:{licenseId:"",expireDate:"",os:"",index:t,disable:!1}};i["".concat(t)]=n,e.forEach((function(e,t,c){n.license.licenseId=c[0],n.license.expireDate=U(c[1]),n.license.os=c[2]}))})),setTimeout((function(){return function(e){var t=Object(w.a)(I),c=Object(E.a)(t);Object(E.d)(Object(E.c)(c,"licenses/"),e)}(i)}),3e3),setTimeout((function(){return function(e){var t=Object(w.a)(I),c=Object(E.a)(t);Object(E.d)(Object(E.c)(c,"devices/"),e),console.log("New liscense setted up to Db!")}(B)}),2e3)}},U=function(e){var t=e.substring(0,4),c=e.substring(4,6),n=e.substring(6,8),i=e.substring(8,12);return n+"/"+c+"/"+t+", "+i.substring(0,2)+":"+i.substring(2,4)},Z=c(38),K=c.n(Z),W=function(e){var t=e.licenseId,c=e.expireDate,i=e.index,s=e.devices,a=e.osLicense,l=Object(n.useRef)(null),r=Object(n.useState)(),d=Object(O.a)(r,2),o=d[0],b=d[1],j=Object(n.useState)(),u=Object(O.a)(j,2),v=u[0],x=u[1],h=s&&s.filter((function(e){return e.device.idDevice===v&&e.device}));return Object(D.jsxs)("div",{className:K.a.containerDropdown,children:[Object(D.jsxs)("select",{className:K.a.dropDownStyle,ref:l,"data-index":i,"data-licenseid":t,"data-expiredate":c,disabled:e.disable,onChange:function(e){return x(e.target.value)},children:[Object(D.jsx)("option",{children:"select"}),s&&s.map((function(e,t){return Object(D.jsx)("option",{children:e.device.idDevice},t)}))]}),Object(D.jsx)("select",{className:K.a.dropDownStyle,disabled:e.disable,onChange:function(e){return b(e.target.value)},children:["select","pair","eject"].map((function(e,t){return Object(D.jsx)("option",{children:e},t)}))}),Object(D.jsx)("button",{className:K.a.styleButtonDropDownlist,disabled:e.disable,onClick:function(){if("select"!==v&&"select"!==o&&void 0!==v&&void 0!==o&&a===h[0].device.osDevice){var t=!0!==k.a.isEmpty(h)&&h[0].device.status,c=l.current.getAttribute("data-index"),n=l.current.getAttribute("data-licenseid"),i=l.current.getAttribute("data-expiredate");if("pending"===t)!function(e){var t="",c="",n=Object(E.a)();"device0"===e.device?(t=0,c="device0"):"device1"===e.device?(t=1,c="device1"):"device2"===e.device?(t=2,c="device2"):"device3"===e.device?(t=3,c="device3"):"device4"===e.device?(t=4,c="device4"):"device5"===e.device&&(t=5,c="device5");var i={},s={},a={},l={};try{("select"!==e.pairSelect&&void 0!==e.pairSelect||"select"!==e.device&&void 0!==e.device)&&(i["/devices/".concat(t,"/device/status")]=e.pairSelect,s["/licenses/".concat(e.index,"/license/disable")]=!0,a["/devices/".concat(t,"/device/licenseSelected")]=e.licenseId,l["/devices/".concat(t,"/device/licensePaired")]=e.expiredate+", "+c,Object(E.e)(Object(E.c)(n),i),Object(E.e)(Object(E.c)(n),s),Object(E.e)(Object(E.c)(n),a),Object(E.e)(Object(E.c)(n),l))}catch(r){console.error(r)}}({device:v,pairSelect:o,index:c,licenseId:n,expiredate:i});else{var s={key1:"selected",textSelected:"sorry this device cannot register a license at this time!",title:f};e.handlerModalAlert(s)}}else{var r={key2:"no-selection",textCombine:"Actions no permited : select devices with different license OS, choose only one selection of available options or No selection.",title:f};e.handlerModalAlert(r)}},children:"Submit"})]})},Y=function(e){var t=e.disable,c=e.expireDate,n=e.licenseId,i=e.operativeSystem,s=e.index,a=e.devices;return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:n}),Object(D.jsx)("td",{children:c}),Object(D.jsx)("td",{children:i}),Object(D.jsxs)("td",{children:[" ",Object(D.jsx)(W,{expireDate:c,licenseId:n,index:s,disable:t,devices:a,handlerModalAlert:e.handlerModalAlert,osLicense:i})]})]})},z=function(e){var t=e.th,c=e.td,n=e.title,i=e.styles;return Object(D.jsxs)("div",{className:i.tableContainer,children:[Object(D.jsx)("h1",{className:i.titleTable,children:n}),Object(D.jsxs)("table",{className:i.tableStyle,children:[Object(D.jsx)("thead",{children:Object(D.jsx)("tr",{children:t},"tr-table-data")},"thead-table-data"),Object(D.jsx)("tbody",{children:c},"tbody-key")]},"table-data")]})},G=c(50),Q=c.n(G),H=function(e){var t=e.licenses,c=e.devices;return Object(D.jsx)(D.Fragment,{children:t?Object(D.jsx)(z,{styles:Q.a,title:"Licenses",th:["License Id","Expire Date","Operative System","Pair Device"].map((function(e,t){return Object(D.jsx)("th",{children:e},t)})),td:t.map((function(t,n){return Object(D.jsx)(Y,{devices:c,index:t.license.index,disable:t.license.disable,expireDate:t.license.expireDate,licenseId:t.license.licenseId,operativeSystem:t.license.os,handlerModalAlert:e.handlerModalAlert},n.toString())}))}):Object(D.jsx)("div",{className:Q.a.emptyContent,children:Object(D.jsx)("label",{children:h})})})},J=function(e){var t=e.idDevice,c=e.osDevice,n=e.osVersion,i=e.status,s=e.licensePaired,a=e.licenseSelected;return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:t}),Object(D.jsx)("td",{children:c}),Object(D.jsx)("td",{children:n}),Object(D.jsx)("td",{children:i}),Object(D.jsx)("td",{children:s}),Object(D.jsx)("td",{children:a})]})},X=c(51),q=c.n(X),$=function(e){var t=e.devices,c=t&&t.map((function(e){return e.device}));return Object(D.jsx)(D.Fragment,{children:c?Object(D.jsx)(z,{styles:q.a,title:"Devices",th:["Id Device","OS Device","OS Version","Status","License Paired","License Selected"].map((function(e,t){return Object(D.jsx)("th",{children:e},t)})),td:c.map((function(e,t){return Object(D.jsx)(J,{indexKey:e.idDevice,idDevice:e.idDevice,osDevice:e.osDevice,osVersion:e.osVersion,status:e.status,licensePaired:e.licensePaired,licenseSelected:e.licenseSelected},t.toString())}))}):Object(D.jsx)("div",{className:q.a.emptyContent,children:Object(D.jsx)("label",{children:h})})})},ee=c(105),te=c(34),ce=c.n(te),ne=function(e){return Object(D.jsx)("div",{onClick:e.handlerModal,className:ce.a.backdrop})},ie=function(e){var t=e.keyContent,c=e.tag;return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:e.styles.join(" "),children:[Object(D.jsx)(ne,{handlerModal:e.handlerModal}),c&&Object(D.jsxs)("div",{className:"no-selection"===t||void 0===t?ce.a["modal-alert"]:ce.a.modal,children:[("no-selection"===t||void 0===t)&&Object(D.jsx)("h1",{children:e.title}),Object(D.jsx)("div",{style:{textAlign:"center"},children:e.content}),Object(D.jsx)("button",{className:ce.a.buttonModal,onClick:e.handlerModal,children:"Close"})]})]})})},se=c(59),ae=c.n(se),le=function(e){var t=e.devices,c=t&&t.filter((function(e){return"eject"===e.device.status}));return Object(D.jsx)(D.Fragment,{children:k.a.isEmpty(c)?Object(D.jsx)("div",{children:"No liceses Found."}):Object(D.jsx)(z,{th:["Id Device","OS Device","OS Version","Status","License Paired","License Selected"].map((function(e,t){return Object(D.jsx)("th",{children:e},t)})),td:c.map((function(e,t){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:e.device.idDevice}),Object(D.jsx)("td",{children:e.device.osDevice}),Object(D.jsx)("td",{children:e.device.osVersion}),Object(D.jsx)("td",{children:e.device.status}),Object(D.jsx)("td",{children:e.device.licensePaired}),Object(D.jsx)("td",{children:e.device.licenseSelected})]},t)})),title:p,styles:ae.a})})},re=c(106),de=c(15),oe=c.n(de),be=function(e){var t=Object(x.g)(),c=u()[0],i=Object(re.a)({tooltip:{backgroundColor:"#e1dfdf",color:"black",borderRadius:"2px",outlineColor:"black"}})(),s=Object(n.useState)(),a=Object(O.a)(s,2),l=a[0],r=a[1],d=Object(n.useState)(),o=Object(O.a)(d,2),b=o[0],j=o[1],v=Object(n.useState)(),h=Object(O.a)(v,2),f=h[0],m=h[1],_=Object(n.useState)(),g=Object(O.a)(_,2),S=g[0],y=g[1],N=Object(n.useState)(),C=Object(O.a)(N,2),L=C[0],P=C[1],A=Object(n.useState)(),M=Object(O.a)(A,2),B=M[0],U=M[1],Z=l?[oe.a.modalLicenseRefused,oe.a.open]:[oe.a.modalLicenseRefused,oe.a.closed],K=S?[oe.a.modalAlert,oe.a.open]:[oe.a.modalAlert,oe.a.closedModalAlert],W=function(e){P(e),y((function(e){return!e}))},Y=function(){return r((function(e){return!e}))};return Object(n.useEffect)((function(){void 0===b&&V(j),void 0===b&&R(m),k.a.isEmpty(c.username)||sessionStorage.setItem("uid",c.username),U(sessionStorage.getItem("uid"))}),[b,c.username]),Object(n.useEffect)((function(){return function(){sessionStorage.clear(),console.log("Component Panel Unmounted!"),console.log("All liceses have been removed from DB!")}}),[]),Object(D.jsxs)(T,{children:[Object(D.jsxs)("h1",{children:[" ","Licenses' Panel of "," ",null===B?"(No User.)":B," "]}),Object(D.jsx)($,{devices:f}),b&&!0!==k.a.isEmpty(b)?Object(D.jsx)(H,{devices:f,licenses:b,handlerModalAlert:W}):Object(D.jsx)("div",{children:Object(D.jsx)("p",{className:oe.a.titleTablelicense,children:"  Load a CSV file for displaying and assign the license to the devices."})}),Object(D.jsxs)("div",{className:oe.a.containerButtonCSV,children:[Object(D.jsx)(ee.a,{title:"Load CSV file format.",classes:i,children:Object(D.jsxs)("label",{className:oe.a.csvButton,children:["Load CSV",Object(D.jsx)("input",{className:oe.a.buttonFile,type:"file",name:"Load CSV",onChange:function(e){F(e),setTimeout((function(){V(j),R(m)}),1e3)}})]})}),Object(D.jsx)(ee.a,{title:"Delete all licenses to DB.",classes:i,children:Object(D.jsx)("button",{onClick:function(){return function(){var e=Object(w.a)(I),t=Object(E.a)(e);Object(E.d)(Object(E.c)(t,"/"),{})}()},className:oe.a.csvButton,children:"Delete"})})]}),!k.a.isEmpty(b)&&Object(D.jsx)(ee.a,{title:"Show liceses table ejected",onClick:Y,children:Object(D.jsxs)("div",{className:oe.a["circle-handle-table-refused"],children:[Object(D.jsx)("span",{className:oe.a.lineLeft}),Object(D.jsx)("span",{className:oe.a.lineRight})]})}),!k.a.isEmpty(b)&&Object(D.jsx)(ee.a,{title:"Back to Page Login",onClick:function(){return t.push("/licensepanel-welcome")},children:Object(D.jsxs)("div",{className:oe.a["circle-handle-back-login"],children:[Object(D.jsx)("span",{className:oe.a["angle-bracket-1"]}),Object(D.jsx)("span",{className:"angle-bracket-2"})]})}),Object(D.jsx)(ie,{tag:l,styles:Z,content:Object(D.jsx)(le,{devices:f,title:p}),handlerModal:Y,keyContent:"table"}),Object(D.jsx)(ie,{tag:S,styles:K,content:S&&("no-selection"===L.key2?L.textCombine:L.textSelected),handlerModal:W,keyContent:S&&L.key2,title:S&&L.title})]})},je=function(){return Object(D.jsx)(D.Fragment,{})},ue=function(){var e=Object(n.useState)(),t=Object(O.a)(e,2),c=t[0],i=t[1];return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(x.d,{children:[Object(D.jsx)(x.b,{path:"/",exact:!0,children:Object(D.jsx)(x.a,{to:"/licensepanel-welcome"})}),Object(D.jsx)(x.b,{path:"/licensepanel-welcome",children:Object(D.jsx)(N,{getUsername:function(e){return i(e)}})}),Object(D.jsx)(x.b,{path:"/panel",children:Object(D.jsx)(be,{userPanel:c})}),Object(D.jsx)(x.b,{path:"/sampl",children:Object(D.jsx)(je,{})})]})})};v(),a.a.render(Object(D.jsx)(i.a.StrictMode,{children:Object(D.jsx)(l.a,{children:Object(D.jsx)(ue,{})})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.96c21c5a.chunk.js.map